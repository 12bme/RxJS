(function(t){var e={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},n=e[typeof window]&&window||this,r=e[typeof exports]&&exports&&!exports.nodeType&&exports,o=e[typeof module]&&module&&!module.nodeType&&module,i=(o&&o.exports===r&&r,e[typeof global]&&global);!i||i.global!==i&&i.window!==i||(n=i),"function"==typeof define&&define.amd?define(["rx.binding","exports"],function(e,r){return n.Rx=t(n,r,e),n.Rx}):"object"==typeof module&&module&&module.exports===r?module.exports=t(n,module.exports,require("./rx")):n.Rx=t(n,{},n.Rx)}).call(this,function(t,e,n){function r(t){var e=function(){this.cancelBubble=!0},n=function(){if(this.bubbledKeyCode=this.keyCode,this.ctrlKey)try{this.keyCode=0}catch(t){}this.defaultPrevented=!0,this.returnValue=!1,this.modified=!0};if(t||(t=window.event),!t.target)switch(t.target=t.target||t.srcElement,"mouseover"==t.type&&(t.relatedTarget=t.fromElement),"mouseout"==t.type&&(t.relatedTarget=t.toElement),t.stopPropagation||(t.stopPropagation=e,t.preventDefault=n),t.type){case"keypress":var r="charCode"in t?t.charCode:t.keyCode;10==r?(r=0,t.keyCode=13):13==r||27==r?r=0:3==r&&(r=99),t.charCode=r,t.keyChar=t.charCode?String.fromCharCode(t.charCode):""}return t}function o(t,e,n){if(t.addListener)return t.addListener(e,n),f(function(){t.removeListener(e,n)});if(t.addEventListener)return t.addEventListener(e,n,!1),f(function(){t.removeEventListener(e,n,!1)});if(t.attachEvent){var o=function(t){n(r(t))};return t.attachEvent("on"+e,o),f(function(){t.detachEvent("on"+e,o)})}return t["on"+e]=n,f(function(){t["on"+e]=null})}function i(t,e,n){var r=new l;if(t&&t.length)for(var s=0,u=t.length;u>s;s++)r.add(i(t[s],e,n));else t&&r.add(o(t,e,n));return r}var s=n.Observable,u=s.prototype,c=n.Internals.AnonymousObservable,a=n.AsyncSubject,f=n.Disposable.create,l=n.CompositeDisposable,h=n.Scheduler.immediate,p=Array.prototype.slice;s.start=function(t,e,n){return d(t,e,n)()};var d=s.toAsync=function(t,e,n){return e||(e=timeoutScheduler),function(){var r=arguments,o=new a;return e.schedule(function(){var e;try{e=t.apply(n,r)}catch(i){return o.onError(i),undefined}o.onNext(e),o.onCompleted()}),o.asObservable()}};return s.fromCallback=function(t,e,n,r){return e||(e=h),function(){var o=p.call(arguments,0);return new c(function(i){return e.schedule(function(){function e(t){var e=t;if(r)try{e=r(arguments)}catch(n){return i.onError(n),undefined}else 1===e.length&&(e=e[0]);i.onNext(e),i.onCompleted()}o.push(e),t.apply(n,o)})})}},s.fromNodeCallback=function(t,e,n,r){return e||(e=h),function(){var o=p.call(arguments,0);return new c(function(i){return e.schedule(function(){function e(t){if(t)return i.onError(t),undefined;var e=p.call(arguments,1);if(r)try{e=r(e)}catch(n){return i.onError(n),undefined}else 1===e.length&&(e=e[0]);i.onNext(e),i.onCompleted()}o.push(e),t.apply(n,o)})})}},s.fromEvent=function(t,e,n){return new c(function(r){return i(t,e,function(t){var e=t;if(n)try{e=n(arguments)}catch(o){return r.onError(o),undefined}r.onNext(e)})}).publish().refCount()},s.fromEventPattern=function(t,e,n){return new c(function(r){function o(t){var e=t;if(n)try{e=n(arguments)}catch(o){return r.onError(o),undefined}r.onNext(e)}var i=t(o);return f(function(){e&&e(o,i)})}).publish().refCount()},s.fromPromise=function(t){return new c(function(e){t.then(function(t){e.onNext(t),e.onCompleted()},function(t){e.onError(t)})})},u.toPromise=function(t){if(t||(t=n.config.Promise),!t)throw Error("Promise type not provided nor in Rx.config.Promise");var e=this;return new t(function(t,n){var r,o=!1;e.subscribe(function(t){r=t,o=!0},function(t){n(t)},function(){o&&t(r)})})},n});