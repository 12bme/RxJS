(function(t){var e={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},n=e[typeof window]&&window||this,r=e[typeof exports]&&exports&&!exports.nodeType&&exports,o=e[typeof module]&&module&&!module.nodeType&&module,i=(o&&o.exports===r&&r,e[typeof global]&&global);!i||i.global!==i&&i.window!==i||(n=i),"function"==typeof define&&define.amd?define(["rx.binding","exports"],function(e,r){return n.Rx=t(n,r,e),n.Rx}):"object"==typeof module&&module&&module.exports===r?module.exports=t(n,module.exports,require("./rx")):n.Rx=t(n,{},n.Rx)}).call(this,function(t,e,n){function r(t,e){return Array.isArray(t)?o.call(e,t):u(t)?N(t.call(e)):c(t)?N(t):s(t)?observableToThunk(t):isPromise(t)?i(t):typeof t===C?t:a(t)||Array.isArray(t)?o.call(e,t):t}function o(t){var e=this;return function(n){function o(t,o){if(!i)try{if(t=r(t,e),typeof t!==C)return c[o]=t,--u||n(null,c);t.call(e,function(t,e){if(!i){if(t)return i=!0,n(t);c[o]=e,--u||n(null,c)}})}catch(s){i=!0,n(s)}}var i,s=Object.keys(t),u=s.length,c=new t.constructor;if(!u)return g.schedule(function(){n(null,c)}),undefined;for(var a=0,h=s.length;h>a;a++)o(t[s[a]],s[a])}}function i(t){return function(e){t.then(function(t){e(null,t)},e)}}function s(t){return t&&t.prototype.subscribe===C}function u(t){return t&&t.constructor&&"GeneratorFunction"===t.constructor.name}function c(t){return t&&typeof t.next===C&&typeof t.throw===C}function a(t){return t&&t.constructor===Object}function h(e){var n=function(){this.cancelBubble=!0},r=function(){if(this.bubbledKeyCode=this.keyCode,this.ctrlKey)try{this.keyCode=0}catch(t){}this.defaultPrevented=!0,this.returnValue=!1,this.modified=!0};if(e||(e=t.event),!e.target)switch(e.target=e.target||e.srcElement,"mouseover"==e.type&&(e.relatedTarget=e.fromElement),"mouseout"==e.type&&(e.relatedTarget=e.toElement),e.stopPropagation||(e.stopPropagation=n,e.preventDefault=r),e.type){case"keypress":var o="charCode"in e?e.charCode:e.keyCode;10==o?(o=0,e.keyCode=13):13==o||27==o?o=0:3==o&&(o=99),e.charCode=o,e.keyChar=e.charCode?String.fromCharCode(e.charCode):""}return e}function l(t,e,n){if(t.addEventListener)return t.addEventListener(e,n,!1),y(function(){t.removeEventListener(e,n,!1)});if(t.attachEvent){var r=function(t){n(h(t))};return t.attachEvent("on"+e,r),y(function(){t.detachEvent("on"+e,r)})}return t["on"+e]=n,y(function(){t["on"+e]=null})}function f(t,e,n){var r=new w;if("[object NodeList]"===Object.prototype.toString.call(t))for(var o=0,i=t.length;i>o;o++)r.add(f(t.item(o),e,n));else t&&r.add(l(t,e,n));return r}var p=n.Observable,d=(p.prototype,p.fromPromise),v=p.throwException,b=n.AnonymousObservable,m=n.AsyncSubject,y=n.Disposable.create,w=n.CompositeDisposable,g=(n.Scheduler.immediate,n.Scheduler.timeout),E=n.helpers.isScheduler,x=Array.prototype.slice,C="function",N=n.spawn=function(t){var e=u(t);return function(n){function o(t,e){g.schedule(n.bind(s,t,e))}function i(t,e){var n;if(arguments.length>2&&(e=x.call(arguments,1)),t)try{n=u.throw(t)}catch(c){return o(c)}if(!t)try{n=u.next(e)}catch(c){return o(c)}if(n.done)return o(null,n.value);if(n.value=r(n.value,s),typeof n.value!==C)i(new TypeError("Rx.spawn only supports a function, Promise, Observable, Object or Array."));else{var a=!1;try{n.value.call(s,function(){a||(a=!0,i.apply(s,arguments))})}catch(c){g.schedule(function(){a||(a=!0,i.call(s,c))})}}}var s=this,u=fan;if(e){var c=x.call(arguments),a=c.length,h=a&&typeof c[a-1]===C;n=h?c.pop():error,u=t.apply(this,c)}else n=n||error;i()}};n.denodify=function(t){return function(){var e,n,r,o=x.call(arguments);return o.push(function(){e=arguments,r&&!n&&(n=!0,cb.apply(this,e))}),t.apply(this,o),function(t){r=t,e&&!n&&(n=!0,t.apply(this,e))}}},p.start=function(t,e,n){return D(t,e,n)()};var D=p.toAsync=function(t,e,n){return E(n)||(n=g),function(){var r=arguments,o=new m;return n.schedule(function(){var n;try{n=t.apply(e,r)}catch(i){return o.onError(i),undefined}o.onNext(n),o.onCompleted()}),o.asObservable()}};p.fromCallback=function(t,e,n){return function(){var r=x.call(arguments,0);return new b(function(o){function i(t){var e=t;if(n){try{e=n(arguments)}catch(r){return o.onError(r),undefined}o.onNext(e)}else 1>=e.length?o.onNext.apply(o,e):o.onNext(e);o.onCompleted()}r.push(i),t.apply(e,r)}).publishLast().refCount()}},p.fromNodeCallback=function(t,e,n){return function(){var r=x.call(arguments,0);return new b(function(o){function i(t){if(t)return o.onError(t),undefined;var e=x.call(arguments,1);if(n){try{e=n(e)}catch(r){return o.onError(r),undefined}o.onNext(e)}else 1>=e.length?o.onNext.apply(o,e):o.onNext(e);o.onCompleted()}r.push(i),t.apply(e,r)}).publishLast().refCount()}},n.config.useNativeEvents=!1;var S=t.angular&&angular.element?angular.element:t.jQuery?t.jQuery:t.Zepto?t.Zepto:null,A=!!t.Ember&&"function"==typeof t.Ember.addListener,_=!!t.Backbone&&!!t.Backbone.Marionette;p.fromEvent=function(t,e,r){if(t.addListener)return O(function(n){t.addListener(e,n)},function(n){t.removeListener(e,n)},r);if(!n.config.useNativeEvents){if(_)return O(function(n){t.on(e,n)},function(n){t.off(e,n)},r);if(A)return O(function(n){Ember.addListener(t,e,n)},function(n){Ember.removeListener(t,e,n)},r);if(S){var o=S(t);return O(function(t){o.on(e,t)},function(t){o.off(e,t)},r)}}return new b(function(n){return f(t,e,function(t){var e=t;if(r)try{e=r(arguments)}catch(o){return n.onError(o),undefined}n.onNext(e)})}).publish().refCount()};var O=p.fromEventPattern=function(t,e,n){return new b(function(r){function o(t){var e=t;if(n)try{e=n(arguments)}catch(o){return r.onError(o),undefined}r.onNext(e)}var i=t(o);return y(function(){e&&e(o,i)})}).publish().refCount()};return p.startAsync=function(t){var e;try{e=t()}catch(n){return v(n)}return d(e)},n});