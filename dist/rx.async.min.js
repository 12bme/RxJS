(function(t){var e={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},n=e[typeof window]&&window||this,r=e[typeof exports]&&exports&&!exports.nodeType&&exports,o=e[typeof module]&&module&&!module.nodeType&&module,i=(o&&o.exports===r&&r,e[typeof global]&&global);!i||i.global!==i&&i.window!==i||(n=i),"function"==typeof define&&define.amd?define(["rx.binding","exports"],function(e,r){return n.Rx=t(n,r,e),n.Rx}):"object"==typeof module&&module&&module.exports===r?module.exports=t(n,module.exports,require("./rx")):n.Rx=t(n,{},n.Rx)}).call(this,function(t,e,n){function r(t,e){return Array.isArray(t)?o.call(e,t):u(t)?C(t.call(e)):c(t)?C(t):s(t)?observableToThunk(t):isPromise(t)?i(t):typeof t===x?t:a(t)||Array.isArray(t)?o.call(e,t):t}function o(t){var e=this;return function(n){function o(t,o){if(!i)try{if(t=r(t,e),typeof t!==x)return c[o]=t,--u||n(null,c);t.call(e,function(t,e){if(!i){if(t)return i=!0,n(t);c[o]=e,--u||n(null,c)}})}catch(s){i=!0,n(s)}}var i,s=Object.keys(t),u=s.length,c=new t.constructor;if(!u)return w.schedule(function(){n(null,c)}),undefined;for(var a=0,l=s.length;l>a;a++)o(t[s[a]],s[a])}}function i(t){return function(e){t.then(function(t){e(null,t)},e)}}function s(t){return t&&t.prototype.subscribe===x}function u(t){return t&&t.constructor&&"GeneratorFunction"===t.constructor.name}function c(t){return t&&typeof t.next===x&&typeof t.throw===x}function a(t){return t&&t.constructor===Object}function l(t,e,n){if(t.addEventListener)return t.addEventListener(e,n,!1),m(function(){t.removeEventListener(e,n,!1)});throw Error("No listener found")}function f(t,e,n){var r=new y;if("[object NodeList]"===Object.prototype.toString.call(t))for(var o=0,i=t.length;i>o;o++)r.add(f(t.item(o),e,n));else t&&r.add(l(t,e,n));return r}var h=n.Observable,p=(h.prototype,h.fromPromise),d=h.throwException,v=n.AnonymousObservable,b=n.AsyncSubject,m=n.Disposable.create,y=n.CompositeDisposable,w=(n.Scheduler.immediate,n.Scheduler.timeout),g=n.helpers.isScheduler,E=Array.prototype.slice,x="function",C=n.spawn=function(t){var e=u(t);return function(n){function o(t,e){w.schedule(n.bind(s,t,e))}function i(t,e){var n;if(arguments.length>2&&(e=E.call(arguments,1)),t)try{n=u.throw(t)}catch(c){return o(c)}if(!t)try{n=u.next(e)}catch(c){return o(c)}if(n.done)return o(null,n.value);if(n.value=r(n.value,s),typeof n.value!==x)i(new TypeError("Rx.spawn only supports a function, Promise, Observable, Object or Array."));else{var a=!1;try{n.value.call(s,function(){a||(a=!0,i.apply(s,arguments))})}catch(c){w.schedule(function(){a||(a=!0,i.call(s,c))})}}}var s=this,u=fan;if(e){var c=E.call(arguments),a=c.length,l=a&&typeof c[a-1]===x;n=l?c.pop():error,u=t.apply(this,c)}else n=n||error;i()}};n.denodify=function(t){return function(){var e,n,r,o=E.call(arguments);return o.push(function(){e=arguments,r&&!n&&(n=!0,cb.apply(this,e))}),t.apply(this,o),function(t){r=t,e&&!n&&(n=!0,t.apply(this,e))}}},h.start=function(t,e,n){return N(t,e,n)()};var N=h.toAsync=function(t,e,n){return g(n)||(n=w),function(){var r=arguments,o=new b;return n.schedule(function(){var n;try{n=t.apply(e,r)}catch(i){return o.onError(i),undefined}o.onNext(n),o.onCompleted()}),o.asObservable()}};h.fromCallback=function(t,e,n){return function(){var r=E.call(arguments,0);return new v(function(o){function i(t){var e=t;if(n){try{e=n(arguments)}catch(r){return o.onError(r),undefined}o.onNext(e)}else 1>=e.length?o.onNext.apply(o,e):o.onNext(e);o.onCompleted()}r.push(i),t.apply(e,r)}).publishLast().refCount()}},h.fromNodeCallback=function(t,e,n){return function(){var r=E.call(arguments,0);return new v(function(o){function i(t){if(t)return o.onError(t),undefined;var e=E.call(arguments,1);if(n){try{e=n(e)}catch(r){return o.onError(r),undefined}o.onNext(e)}else 1>=e.length?o.onNext.apply(o,e):o.onNext(e);o.onCompleted()}r.push(i),t.apply(e,r)}).publishLast().refCount()}},n.config.useNativeEvents=!1;var D=t.angular&&angular.element?angular.element:t.jQuery?t.jQuery:t.Zepto?t.Zepto:null,A=!!t.Ember&&"function"==typeof t.Ember.addListener,S=!!t.Backbone&&!!t.Backbone.Marionette;h.fromEvent=function(t,e,r){if(t.addListener)return _(function(n){t.addListener(e,n)},function(n){t.removeListener(e,n)},r);if(!n.config.useNativeEvents){if(S)return _(function(n){t.on(e,n)},function(n){t.off(e,n)},r);if(A)return _(function(n){Ember.addListener(t,e,n)},function(n){Ember.removeListener(t,e,n)},r);if(D){var o=D(t);return _(function(t){o.on(e,t)},function(t){o.off(e,t)},r)}}return new v(function(n){return f(t,e,function(t){var e=t;if(r)try{e=r(arguments)}catch(o){return n.onError(o),undefined}n.onNext(e)})}).publish().refCount()};var _=h.fromEventPattern=function(t,e,n){return new v(function(r){function o(t){var e=t;if(n)try{e=n(arguments)}catch(o){return r.onError(o),undefined}r.onNext(e)}var i=t(o);return m(function(){e&&e(o,i)})}).publish().refCount()};return h.startAsync=function(t){var e;try{e=t()}catch(n){return d(n)}return p(e)},n});