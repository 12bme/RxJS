/* Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.txt in the project root for license information.*/
(function(a){function b(a,b){if(C&&b.stack&&"object"==typeof a&&null!==a&&a.stack&&-1===a.stack.indexOf(H)){for(var d=[],e=b;e;e=e.source)e.stack&&d.unshift(e.stack);d.unshift(a.stack);var f=d.join("\n"+H+"\n");a.stack=c(f)}}function c(a){for(var b=a.split("\n"),c=[],d=0,g=b.length;g>d;d++){var h=b[d];e(h)||f(h)||!h||c.push(h)}return c.join("\n")}function e(a){var b=h(a);if(!b)return!1;var c=b[0],d=b[1];return c===E&&d>=G&&ha>=d}function f(a){return-1!==a.indexOf("(module.js:")||-1!==a.indexOf("(node.js:")}function g(){if(C)try{throw new Error}catch(a){var b=a.stack.split("\n"),c=b[0].indexOf("@")>0?b[1]:b[2],d=h(c);if(!d)return;return E=d[0],d[1]}}function h(a){var b=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(a);if(b)return[b[1],Number(b[2])];var c=/at ([^ ]+):(\d+):(?:\d+)$/.exec(a);if(c)return[c[1],Number(c[2])];var d=/.*@(.+):(\d+)$/.exec(a);return d?[d[1],Number(d[2])]:void 0}function i(){try{return F.apply(this,arguments)}catch(a){return I.e=a,I}}function j(a){if(!isFunction(a))throw new TypeError("fn must be a function");return F=a,i}function k(a){throw a}var l={"function":!0,object:!0},m=l[typeof exports]&&exports&&!exports.nodeType&&exports,n=l[typeof self]&&self.Object&&self,o=l[typeof window]&&window&&window.Object&&window,p=l[typeof module]&&module&&!module.nodeType&&module,q=p&&p.exports===m&&m,r=m&&p&&"object"==typeof global&&global&&global.Object&&global,s=s=r||o!==(this&&this.window)&&o||n||this,t={internals:{},config:{Promise:s.Promise},helpers:{}},u=t.helpers.noop=function(){},v=t.helpers.defaultNow=function(){return Date.now?Date.now:function(){return+new Date}}(),w=t.helpers.defaultError=function(a){throw a},x=(t.helpers.isPromise=function(a){return!!a&&!isFunction(a.subscribe)&&isFunction(a.then)},t.helpers.defaultSubComparer=function(a,b){return a>b?1:b>a?-1:0});isFunction=t.helpers.isFunction=function(){var a=function(a){return"function"==typeof a||!1};return a(/x/)&&(a=function(a){return"function"==typeof a&&"[object Function]"==toString.call(a)}),a}();var y=t.NotImplementedError=function(a){this.message=a||"This operation is not implemented",Error.call(this)};y.prototype=Error.prototype;var z=t.NotSupportedError=function(a){this.message=a||"This operation is not supported",Error.call(this)};z.prototype=Error.prototype;var A=t.helpers.notImplemented=function(){throw new y},B=t.helpers.notSupported=function(){throw new z};t.config.longStackSupport=!1;var C=!1;try{throw new Error}catch(D){C=!!D.stack}var E,F,G=g(),H="From previous event:",I={e:{}},J=({}.hasOwnProperty,Array.prototype.slice,this.inherits=t.internals.inherits=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}),K=(t.internals.addProperties=function(a){for(var b=[],c=1,d=arguments.length;d>c;c++)b.push(arguments[c]);for(var e=0,f=b.length;f>e;e++){var g=b[e];for(var h in g)a[h]=g[h]}},t.internals.addRef=function(a,b){return new fa(function(c){return new K(b.getDisposable(),a.subscribe(c))})},t.CompositeDisposable=function(){var a,b,c=[];if(Array.isArray(arguments[0]))c=arguments[0],b=c.length;else for(b=arguments.length,c=new Array(b),a=0;b>a;a++)c[a]=arguments[a];for(a=0;b>a;a++)if(!P(c[a]))throw new TypeError("Not a disposable");this.disposables=c,this.isDisposed=!1,this.length=c.length}),L=K.prototype;L.add=function(a){this.isDisposed?a.dispose():(this.disposables.push(a),this.length++)},L.remove=function(a){var b=!1;if(!this.isDisposed){var c=this.disposables.indexOf(a);-1!==c&&(b=!0,this.disposables.splice(c,1),this.length--,a.dispose())}return b},L.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var a=this.disposables.length,b=new Array(a),c=0;a>c;c++)b[c]=this.disposables[c];for(this.disposables=[],this.length=0,c=0;a>c;c++)b[c].dispose()}};var M=t.Disposable=function(a){this.isDisposed=!1,this.action=a||u};M.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var N=M.create=function(a){return new M(a)},O=M.empty={dispose:u},P=M.isDisposable=function(a){return a&&isFunction(a.dispose)},Q=(M.checkDisposed=function(a){if(a.isDisposed)throw new ObjectDisposedError},t.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null});Q.prototype.getDisposable=function(){return this.current},Q.prototype.setDisposable=function(a){if(this.current)throw new Error("Disposable has already been assigned");var b=this.isDisposed;!b&&(this.current=a),b&&a&&a.dispose()},Q.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var a=this.current;this.current=null}a&&a.dispose()};var R=t.SerialDisposable=function(){this.isDisposed=!1,this.current=null};R.prototype.getDisposable=function(){return this.current},R.prototype.setDisposable=function(a){var b=this.isDisposed;if(!b){var c=this.current;this.current=a}c&&c.dispose(),b&&a&&a.dispose()},R.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var a=this.current;this.current=null}a&&a.dispose()};var S=t.internals.ScheduledItem=function(a,b,c,d,e){this.scheduler=a,this.state=b,this.action=c,this.dueTime=d,this.comparer=e||x,this.disposable=new Q};S.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},S.prototype.compareTo=function(a){return this.comparer(this.dueTime,a.dueTime)},S.prototype.isCancelled=function(){return this.disposable.isDisposed},S.prototype.invokeCore=function(){return this.action(this.scheduler,this.state)};var T=t.Scheduler=function(){function a(a,b,c,d){this.now=a,this._schedule=b,this._scheduleRelative=c,this._scheduleAbsolute=d}function b(a,b){return b(),O}a.isScheduler=function(b){return b instanceof a};var c=a.prototype;return c.schedule=function(a){return this._schedule(a,b)},c.scheduleWithState=function(a,b){return this._schedule(a,b)},c.scheduleWithRelative=function(a,c){return this._scheduleRelative(c,a,b)},c.scheduleWithRelativeAndState=function(a,b,c){return this._scheduleRelative(a,b,c)},c.scheduleWithAbsolute=function(a,c){return this._scheduleAbsolute(c,a,b)},c.scheduleWithAbsoluteAndState=function(a,b,c){return this._scheduleAbsolute(a,b,c)},a.now=v,a.normalize=function(a){return 0>a&&(a=0),a},a}(),U=T.normalize;T.isScheduler;!function(a){function b(a,b){function c(b){function e(b){function e(a,b){return f?g.remove(d):h=!0,c(b),O}var f=!1,h=!1;d=a.scheduleWithState(b,e),h||(g.add(d),f=!0)}f(b,e)}var e=b[0],f=b[1],g=new K;return c(e),g}function c(a,b,c){function d(b){f(b,function(b,e){var f=!1,h=!1,i=a[c](b,e,function(a,b){return f?g.remove(i):h=!0,d(b),O});h||(g.add(i),f=!0)})}var e=b[0],f=b[1],g=new K;return d(e),g}function e(a,b){a(function(c){b(a,c)})}a.scheduleRecursive=function(a){return this.scheduleRecursiveWithState(a,e)},a.scheduleRecursiveWithState=function(a,c){return this.scheduleWithState([a,c],b)},a.scheduleRecursiveWithRelative=function(a,b){return this.scheduleRecursiveWithRelativeAndState(b,a,e)},a.scheduleRecursiveWithRelativeAndState=function(a,b,d){return this._scheduleRelative([a,d],b,function(a,b){return c(a,b,"scheduleWithRelativeAndState")})},a.scheduleRecursiveWithAbsolute=function(a,b){return this.scheduleRecursiveWithAbsoluteAndState(b,a,e)},a.scheduleRecursiveWithAbsoluteAndState=function(a,b,d){return this._scheduleAbsolute([a,d],b,function(a,b){return c(a,b,"scheduleWithAbsoluteAndState")})}}(T.prototype),function(a){T.prototype.schedulePeriodic=function(a,b){return this.schedulePeriodicWithState(null,a,b)},T.prototype.schedulePeriodicWithState=function(a,b,c){if("undefined"==typeof s.setInterval)throw new z;b=U(b);var d=a,e=s.setInterval(function(){d=c(d)},b);return N(function(){s.clearInterval(e)})}}(T.prototype);var V,W,X=(t.internals.SchedulePeriodicRecursive=function(){function a(a,b){b(0,this._period);try{this._state=this._action(this._state)}catch(c){throw this._cancel.dispose(),c}}function b(a,b,c,d){this._scheduler=a,this._state=b,this._period=c,this._action=d}return b.prototype.start=function(){var b=new Q;return this._cancel=b,b.setDisposable(this._scheduler.scheduleRecursiveWithRelativeAndState(0,this._period,a.bind(this))),b},b}(),T.immediate=function(){function a(a,b){return b(this,a)}return new T(v,a,B,B)}(),T.currentThread=function(){function a(){for(;c.length>0;){var a=c.shift();!a.isCancelled()&&a.invoke()}}function b(b,d){var e=new S(this,b,d,this.now());if(c)c.push(e);else{c=[e];var f=j(a)();if(c=null,f===I)return k(f.e)}return e.disposable}var c,d=new T(v,b,B,B);return d.scheduleRequired=function(){return!c},d}()),Y=function(){var a,b=u;if(s.setTimeout)a=s.setTimeout,b=s.clearTimeout;else{if(!s.WScript)throw new z;a=function(a,b){s.WScript.Sleep(b),a()}}return{setTimeout:a,clearTimeout:b}}(),Z=Y.setTimeout,$=Y.clearTimeout;!function(){function a(b){if(f)Z(function(){a(b)},0);else{var c=e[b];if(c){f=!0;var d=j(c)();if(W(b),f=!1,d===I)return k(d.e)}}}function b(){if(!s.postMessage||s.importScripts)return!1;var a=!1,b=s.onmessage;return s.onmessage=function(){a=!0},s.postMessage("","*"),s.onmessage=b,a}function c(b){"string"==typeof b.data&&b.data.substring(0,i.length)===i&&a(b.data.substring(i.length))}var d=1,e={},f=!1;W=function(a){delete e[a]};var g=RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),h="function"==typeof(h=r&&q&&r.setImmediate)&&!g.test(h)&&h;if(isFunction(h))V=function(b){var c=d++;return e[c]=b,h(function(){a(c)}),c};else if("undefined"!=typeof process&&"[object process]"==={}.toString.call(process))V=function(b){var c=d++;return e[c]=b,process.nextTick(function(){a(c)}),c};else if(b()){var i="ms.rx.schedule"+Math.random();s.addEventListener?s.addEventListener("message",c,!1):s.attachEvent?s.attachEvent("onmessage",c):s.onmessage=c,V=function(a){var b=d++;return e[b]=a,s.postMessage(i+currentId,"*"),b}}else if(s.MessageChannel){var l=new s.MessageChannel;l.port1.onmessage=function(b){a(b.data)},V=function(a){var b=d++;return e[b]=a,l.port2.postMessage(b),b}}else V="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(b){var c=s.document.createElement("script"),f=d++;return e[f]=b,c.onreadystatechange=function(){a(f),c.onreadystatechange=null,c.parentNode.removeChild(c),c=null},s.document.documentElement.appendChild(c),f}:function(b){var c=d++;return e[c]=b,Z(function(){a(c)},0),c}}();var _,aa=(T.timeout=T["default"]=function(){function a(a,b){var c=this,d=new Q,e=V(function(){!d.isDisposed&&d.setDisposable(b(c,a))});return new K(d,N(function(){W(e)}))}function b(a,b,c){var d=this,e=T.normalize(b),f=new Q;if(0===e)return d.scheduleWithState(a,c);var g=Z(function(){!f.isDisposed&&f.setDisposable(c(d,a))},e);return new K(f,N(function(){$(g)}))}function c(a,b,c){return this.scheduleWithRelativeAndState(a,b-this.now(),c)}return new T(v,a,b,c)}(),t.Observer=function(){}),ba=aa.create=function(a,b,c){return a||(a=u),b||(b=w),c||(c=u),new da(a,b,c)},ca=t.internals.AbstractObserver=function(a){function b(){this.isStopped=!1,a.call(this)}return J(b,a),b.prototype.next=A,b.prototype.error=A,b.prototype.completed=A,b.prototype.onNext=function(a){this.isStopped||this.next(a)},b.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.error(a))},b.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},b.prototype.dispose=function(){this.isStopped=!0},b.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.error(a),!0)},b}(aa),da=t.AnonymousObserver=function(a){function b(b,c,d){a.call(this),this._onNext=b,this._onError=c,this._onCompleted=d}return J(b,a),b.prototype.next=function(a){this._onNext(a)},b.prototype.error=function(a){this._onError(a)},b.prototype.completed=function(){this._onCompleted()},b}(ca),ea=t.Observable=function(){function a(a,c){return function(d){var e=d.onError;return d.onError=function(c){b(c,a),e.call(d,c)},c.call(a,d)}}function c(b){if(t.config.longStackSupport&&C){var c=j(k)(new Error).e;this.stack=c.stack.substring(c.stack.indexOf("\n")+1),this._subscribe=a(this,b)}else this._subscribe=b}return _=c.prototype,_.isObservable=function(a){return a&&isFunction(a.subscribe)},_.subscribe=_.forEach=function(a,b,c){return this._subscribe("object"==typeof a?a:ba(a,b,c))},_.subscribeOnNext=function(a,b){return this._subscribe(ba("undefined"!=typeof b?function(c){a.call(b,c)}:a))},_.subscribeOnError=function(a,b){return this._subscribe(ba(null,"undefined"!=typeof b?function(c){a.call(b,c)}:a))},_.subscribeOnCompleted=function(a,b){return this._subscribe(ba(null,null,"undefined"!=typeof b?function(){a.call(b)}:a))},c}(),fa=t.AnonymousObservable=function(a){function b(a){return a&&isFunction(a.dispose)?a:isFunction(a)?N(a):O}function c(a,c){var d=c[0],e=c[1],f=j(e)(d);return f!==I||d.fail(I.e)?void d.setDisposable(b(f)):k(I.e)}function d(b,d){function e(a){var d=new ga(a),e=[d,b];return X.scheduleRequired()?X.scheduleWithState(e,c):c(null,e),d}this.source=d,a.call(this,e)}return J(d,a),d}(ea),ga=(t.ObservableBase=function(a){function b(a){return a&&isFunction(a.dispose)?a:isFunction(a)?N(a):O}function c(a,c){var d=c[0],e=c[1],f=j(e.subscribeCore).call(e,d);return f!==I||d.fail(I.e)?void d.setDisposable(b(f)):k(I.e)}function d(a){var b=new ga(a),d=[b,this];return X.scheduleRequired()?X.scheduleWithState(d,c):c(null,d),b}function e(){a.call(this,d)}return J(e,a),e.prototype.subscribeCore=A,e}(ea),function(a){function b(b){a.call(this),this.observer=b,this.m=new Q}J(b,a);var c=b.prototype;return c.next=function(a){var b=j(this.observer.onNext).call(this.observer,a);b===I&&(this.dispose(),k(b.e))},c.error=function(a){var b=j(this.observer.onError).call(this.observer,a);this.dispose(),b===I&&k(b.e)},c.completed=function(){var a=j(this.observer.onCompleted).call(this.observer);this.dispose(),a===I&&k(a.e)},c.setDisposable=function(a){this.m.setDisposable(a)},c.getDisposable=function(){return this.m.getDisposable()},c.dispose=function(){a.prototype.dispose.call(this),this.m.dispose()},b}(ca));ea.create=function(a,b){return new fa(a,b)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?(s.Rx=t,define(function(){return t})):m&&p?q?(p.exports=t).Rx=t:m.Rx=t:s.Rx=t;var ha=g()}).call(this);
//# sourceMappingURL=rx.core.map