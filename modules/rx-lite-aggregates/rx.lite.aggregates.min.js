/* Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.txt in the project root for license information.*/
(function(a){var b={"function":!0,object:!0},c=b[typeof exports]&&exports&&!exports.nodeType&&exports,d=b[typeof self]&&self.Object&&self,e=b[typeof window]&&window&&window.Object&&window,f=b[typeof module]&&module&&!module.nodeType&&module,g=(f&&f.exports===c&&c,c&&f&&"object"==typeof global&&global&&global.Object&&global),h=h=g||e!==(this&&this.window)&&e||d||this;"function"==typeof define&&define.amd?define(["./rx.lite"],function(b,c){return a(h,c,b)}):"object"==typeof module&&module&&module.exports===c?module.exports=a(h,module.exports,require("rx-lite")):h.Rx=a(h,{},h.Rx)}).call(this,function(a,b,c,d){function e(a){return function(){try{return a.apply(this,arguments)}catch(b){return D.e=b,D}}}function f(a,b,c){return new l(function(d){return a.subscribe(new F(d,b,c))},a)}function g(a){if(0===a.length)throw new A;return a[0]}function h(a,b,c,d){var e=z(b,c,3);return new l(function(b){return a.subscribe(new P(b,a,e,d))},a)}var i=c.Observable,j=i.prototype,k=c.BinaryDisposable,l=c.AnonymousObservable,m=c.internals.AbstractObserver,n=c.Disposable.empty,o=c.helpers,p=o.defaultComparer,q=o.identity,r=o.defaultSubComparer,s=o.isFunction,t=o.isPromise,u=o.isArrayLike,v=o.isIterable,w=c.internals.inherits,x=i.fromPromise,y=i.from,z=c.internals.bindCallback,A=c.EmptyError,B=c.ObservableBase,C=c.ArgumentOutOfRangeError,D={e:{}},E=c.internals.tryCatch=function(a){if(!s(a))throw new TypeError("fn must be a function");return e(a)},F=function(a){function b(b,c,d){this._o=b,this._k=c,this._c=d,this._v=null,this._hv=!1,this._l=[],a.call(this)}return w(b,a),b.prototype.next=function(a){var b=E(this._k)(a);if(b===D)return this._o.onError(b.e);var c=0;if(this._hv){if(c=E(this._c)(b,this._v),c===D)return this._o.onError(c.e)}else this._hv=!0,this._v=b;c>0&&(this._v=b,this._l=[]),c>=0&&this._l.push(a)},b.prototype.error=function(a){this._o.onError(a)},b.prototype.completed=function(){this._o.onNext(this._l),this._o.onCompleted()},b}(m),G=function(a){function b(b,c,d,e){this.source=b,this.acc=c,this.hasSeed=d,this.seed=e,a.call(this)}function c(a,b){this.o=a,this.acc=b.acc,this.hasSeed=b.hasSeed,this.seed=b.seed,this.hasAccumulation=!1,this.result=null,this.hasValue=!1,this.isStopped=!1}return w(b,a),b.prototype.subscribeCore=function(a){return this.source.subscribe(new c(a,this))},c.prototype.onNext=function(a){this.isStopped||(!this.hasValue&&(this.hasValue=!0),this.hasAccumulation?this.result=E(this.acc)(this.result,a):(this.result=this.hasSeed?E(this.acc)(this.seed,a):a,this.hasAccumulation=!0),this.result===D&&this.o.onError(this.result.e))},c.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.o.onError(a))},c.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.hasValue&&this.o.onNext(this.result),!this.hasValue&&this.hasSeed&&this.o.onNext(this.seed),!this.hasValue&&!this.hasSeed&&this.o.onError(new A),this.o.onCompleted())},c.prototype.dispose=function(){this.isStopped=!0},c.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(a),!0)},b}(B);j.reduce=function(a){var b=!1;if(2===arguments.length){b=!0;var c=arguments[1]}return new G(this,a,b,c)};var H=function(a){function b(b,c,d){this._o=b,this._fn=c,this._s=d,this._i=0,a.call(this)}return w(b,a),b.prototype.next=function(a){var b=E(this._fn)(a,this._i++,this._s);return b===D?this._o.onError(b.e):void(Boolean(b)&&(this._o.onNext(!0),this._o.onCompleted()))},b.prototype.error=function(a){this._o.onError(a)},b.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},b}(m);j.some=function(a,b){var c=this,d=z(a,b,3);return new l(function(a){return c.subscribe(new H(a,d,c))})};var I=function(a){function b(b){this._o=b,a.call(this)}return w(b,a),b.prototype.next=function(){this._o.onNext(!1),this._o.onCompleted()},b.prototype.error=function(a){this._o.onError(a)},b.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},b}(m);j.isEmpty=function(){var a=this;return new l(function(b){return a.subscribe(new I(b))},a)};var J=function(a){function b(b,c,d){this._o=b,this._fn=c,this._s=d,this._i=0,a.call(this)}return w(b,a),b.prototype.next=function(a){var b=E(this._fn)(a,this._i++,this._s);return b===D?this._o.onError(b.e):void(Boolean(b)||(this._o.onNext(!1),this._o.onCompleted()))},b.prototype.error=function(a){this._o.onError(a)},b.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},b}(m);j.every=function(a,b){var c=this,d=z(a,b,3);return new l(function(a){return c.subscribe(new J(a,d,c))},this)},j.includes=function(a,b){function c(a,b){return 0===a&&0===b||a===b||isNaN(a)&&isNaN(b)}var d=this;return new l(function(e){var f=0,g=+b||0;return Math.abs(g)===1/0&&(g=0),0>g?(e.onNext(!1),e.onCompleted(),n):d.subscribe(function(b){f++>=g&&c(b,a)&&(e.onNext(!0),e.onCompleted())},function(a){e.onError(a)},function(){e.onNext(!1),e.onCompleted()})},this)},j.contains=function(a,b){j.includes(a,b)};var K=function(a){function b(b,c,d){this._o=b,this._fn=c,this._s=d,this._i=0,this._c=0,a.call(this)}return w(b,a),b.prototype.next=function(a){if(this._fn){var b=E(this._fn)(a,this._i++,this._s);if(b===D)return this._o.onError(b.e);Boolean(b)&&this._c++}else this._c++},b.prototype.error=function(a){this._o.onError(a)},b.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},b}(m);j.count=function(a,b){var c=this,d=z(a,b,3);return new l(function(a){return c.subscribe(new K(a,d,c))},c)},j.indexOf=function(a,b){var c=this;return new l(function(d){var e=0,f=+b||0;return Math.abs(f)===1/0&&(f=0),0>f?(d.onNext(-1),d.onCompleted(),n):c.subscribe(function(b){e>=f&&b===a&&(d.onNext(e),d.onCompleted()),e++},function(a){d.onError(a)},function(){d.onNext(-1),d.onCompleted()})},c)},j.sum=function(a,b){return a&&s(a)?this.map(a,b).sum():this.reduce(function(a,b){return a+b},0)},j.minBy=function(a,b){return b||(b=r),f(this,a,function(a,c){return-1*b(a,c)})},j.min=function(a){return this.minBy(q,a).map(function(a){return g(a)})},j.maxBy=function(a,b){return b||(b=r),f(this,a,b)},j.max=function(a){return this.maxBy(q,a).map(function(a){return g(a)})};var L=function(a){function b(b,c,d){this._o=b,this._fn=c,this._s=d,this._c=0,this._t=0,a.call(this)}return w(b,a),b.prototype.next=function(a){if(this._fn){var b=E(this._fn)(a,this._c++,this._s);if(b===D)return this._o.onError(b.e);this._t+=b}else this._c++,this._t+=a},b.prototype.error=function(a){this._o.onError(a)},b.prototype.completed=function(){return 0===this._c?this._o.onError(new A):(this._o.onNext(this._t/this._c),void this._o.onCompleted())},b}(m);j.average=function(a,b){var c,d=this;return s(a)&&(c=z(a,b,3)),new l(function(a){return d.subscribe(new L(a,c,d))},d)},j.sequenceEqual=function(a,b){var c=this;return b||(b=p),new l(function(d){var e=!1,f=!1,g=[],h=[],i=c.subscribe(function(a){if(h.length>0){var c=h.shift(),e=E(b)(c,a);if(e===D)return d.onError(e.e);e||(d.onNext(!1),d.onCompleted())}else f?(d.onNext(!1),d.onCompleted()):g.push(a)},function(a){d.onError(a)},function(){e=!0,0===g.length&&(h.length>0?(d.onNext(!1),d.onCompleted()):f&&(d.onNext(!0),d.onCompleted()))});(u(a)||v(a))&&(a=y(a)),t(a)&&(a=x(a));var j=a.subscribe(function(a){if(g.length>0){var c=g.shift(),f=E(b)(c,a);if(f===D)return d.onError(f.e);f||(d.onNext(!1),d.onCompleted())}else e?(d.onNext(!1),d.onCompleted()):h.push(a)},function(a){d.onError(a)},function(){f=!0,0===h.length&&(g.length>0?(d.onNext(!1),d.onCompleted()):e&&(d.onNext(!0),d.onCompleted()))});return new k(i,j)},c)},j.elementAt=function(a,b){if(0>a)throw new C;var c=this;return new l(function(e){var f=a;return c.subscribe(function(a){0===f--&&(e.onNext(a),e.onCompleted())},function(a){e.onError(a)},function(){b===d?e.onError(new C):(e.onNext(b),e.onCompleted())})},c)};var M=function(a){function b(b,c,d){this._o=b,this._obj=c,this._s=d,this._i=0,this._hv=!1,this._v=null,a.call(this)}return w(b,a),b.prototype.next=function(a){var b=!1;if(this._obj.predicate){var c=E(this._obj.predicate)(a,this._i++,this._s);if(c===D)return this._o.onError(c.e);Boolean(c)&&(b=!0)}else this._obj.predicate||(b=!0);if(b){if(this._hv)return this._o.onError(new Error("Sequence contains more than one matching element"));this._hv=!0,this._v=a}},b.prototype.error=function(a){this._o.onError(a)},b.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===d?this._o.onError(new A):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},b}(m);j.single=function(a,b){var c={},d=this;if(c="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},s(c.predicate)){var e=c.predicate;c.predicate=z(e,c.thisArg,3)}return new l(function(a){return d.subscribe(new M(a,c,d))},d)};var N=function(a){function b(b,c,d){this._o=b,this._obj=c,this._s=d,this._i=0,a.call(this)}return w(b,a),b.prototype.next=function(a){if(this._obj.predicate){var b=E(this._obj.predicate)(a,this._i++,this._s);if(b===D)return this._o.onError(b.e);Boolean(b)&&(this._o.onNext(a),this._o.onCompleted())}else this._obj.predicate||(this._o.onNext(a),this._o.onCompleted())},b.prototype.error=function(a){this._o.onError(a)},b.prototype.completed=function(){this._obj.defaultValue===d?this._o.onError(new A):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},b}(m);j.first=function(){var a={},b=this;if(a="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},s(a.predicate)){var c=a.predicate;a.predicate=z(c,a.thisArg,3)}return new l(function(c){return b.subscribe(new N(c,a,b))},b)};var O=function(a){function b(b,c,d){this._o=b,this._obj=c,this._s=d,this._i=0,this._hv=!1,this._v=null,a.call(this)}return w(b,a),b.prototype.next=function(a){var b=!1;if(this._obj.predicate){var c=E(this._obj.predicate)(a,this._i++,this._s);if(c===D)return this._o.onError(c.e);Boolean(c)&&(b=!0)}else this._obj.predicate||(b=!0);b&&(this._hv=!0,this._v=a)},b.prototype.error=function(a){this._o.onError(a)},b.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===d?this._o.onError(new A):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},b}(m);j.last=function(){var a={},b=this;if(a="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},s(a.predicate)){var c=a.predicate;a.predicate=z(c,a.thisArg,3)}return new l(function(c){return b.subscribe(new O(c,a,b))},b)};var P=function(a){function b(b,c,d,e){this._o=b,this._s=c,this._cb=d,this._y=e,this._i=0,a.call(this)}return w(b,a),b.prototype.next=function(a){var b=E(this._cb)(a,this._i,this._s);return b===D?this._o.onError(b.e):void(b?(this._o.onNext(this._y?this._i:a),this._o.onCompleted()):this._i++)},b.prototype.error=function(a){this._o.onError(a)},b.prototype.completed=function(){this._y&&this._o.onNext(-1),this._o.onCompleted()},b}(m);return j.find=function(a,b){return h(this,a,b,!1)},j.findIndex=function(a,b){return h(this,a,b,!0)},j.toSet=function(){if("undefined"==typeof a.Set)throw new TypeError;var b=this;return new l(function(c){var d=new a.Set;return b.subscribe(function(a){d.add(a)},function(a){c.onError(a)},function(){c.onNext(d),c.onCompleted()})},b)},j.toMap=function(b,c){if("undefined"==typeof a.Map)throw new TypeError;var d=this;return new l(function(e){var f=new a.Map;return d.subscribe(function(a){var d;try{d=b(a)}catch(g){return void e.onError(g)}var h=a;if(c)try{h=c(a)}catch(g){return void e.onError(g)}f.set(d,h)},function(a){e.onError(a)},function(){e.onNext(f),e.onCompleted()})},d)},c});
//# sourceMappingURL=rx.lite.aggregates.map