/* Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.txt in the project root for license information.*/
(function(a){var b={"function":!0,object:!0},c=b[typeof exports]&&exports&&!exports.nodeType&&exports,d=b[typeof self]&&self.Object&&self,e=b[typeof window]&&window&&window.Object&&window,f=b[typeof module]&&module&&!module.nodeType&&module,g=(f&&f.exports===c&&c,c&&f&&"object"==typeof global&&global&&global.Object&&global),h=h=g||e!==(this&&this.window)&&e||d||this;"function"==typeof define&&define.amd?define(["./rx.lite"],function(b,c){return a(h,c,b)}):"object"==typeof module&&module&&module.exports===c?module.exports=a(h,module.exports,require("rx-lite")):h.Rx=a(h,{},h.Rx)}).call(this,function(a,b,c,d){function e(a){return function(){try{return a.apply(this,arguments)}catch(b){return A.e=b,A}}}function f(a){return a.toArray()}function g(a,b){return a.groupJoin(this,b,r,function(a,b){return b})}function h(a){var b=this;return new t(function(c){var d=new p,e=new k,f=new m(e);return c.onNext(u(d,f)),e.add(b.subscribe(function(a){d.onNext(a)},function(a){d.onError(a),c.onError(a)},function(){d.onCompleted(),c.onCompleted()})),x(a)&&(a=z(a)),e.add(a.subscribe(function(a){d.onCompleted(),d=new p,c.onNext(u(d,f))},function(a){d.onError(a),c.onError(a)},function(){d.onCompleted(),c.onCompleted()})),f},b)}function i(a){var b=this;return new t(function(c){function d(){var b;try{b=a()}catch(f){return void c.onError(f)}x(b)&&(b=z(b));var i=new n;e.setDisposable(i),i.setDisposable(b.take(1).subscribe(w,function(a){h.onError(a),c.onError(a)},function(){h.onCompleted(),h=new p,c.onNext(u(h,g)),d()}))}var e=new o,f=new k(e),g=new m(f),h=new p;return c.onNext(u(h,g)),f.add(b.subscribe(function(a){h.onNext(a)},function(a){h.onError(a),c.onError(a)},function(){h.onCompleted(),c.onCompleted()})),d(),g},b)}var j=c.Observable,k=c.CompositeDisposable,l=c.BinaryDisposable,m=c.RefCountDisposable,n=c.SingleAssignmentDisposable,o=c.SerialDisposable,p=c.Subject,q=j.prototype,r=j.empty,s=j.never,t=c.AnonymousObservable,u=(c.Observer.create,c.internals.addRef),v=(c.internals.isEqual,c.internals.inherits),w=c.helpers.noop,x=(c.helpers.identity,c.helpers.isPromise),y=c.helpers.isFunction,z=(c.internals.bindCallback,j.fromPromise),A=(c.ArgumentOutOfRangeError,{e:{}}),B=c.internals.tryCatch=function(a){if(!y(a))throw new TypeError("fn must be a function");return e(a)},C=a.Map||function(){function a(){this.size=0,this._values=[],this._keys=[]}return a.prototype["delete"]=function(a){var b=this._keys.indexOf(a);return-1===b?!1:(this._values.splice(b,1),this._keys.splice(b,1),this.size--,!0)},a.prototype.get=function(a){var b=this._keys.indexOf(a);return-1===b?d:this._values[b]},a.prototype.set=function(a,b){var c=this._keys.indexOf(a);return-1===c?(this._keys.push(a),this._values.push(b),this.size++):this._values[c]=b,this},a.prototype.forEach=function(a,b){for(var c=0;c<this.size;c++)a.call(b,this._values[c],this._keys[c])},a}();q.join=function(a,b,c,d){var e=this;return new t(function(f){var g=new k,h=!1,i=!1,j=0,l=0,m=new C,o=new C,p=function(a){f.onError(a)};return g.add(e.subscribe(function(a){var c=j++,e=new n;m.set(c,a),g.add(e);var i=B(b)(a);return i===A?f.onError(i.e):(e.setDisposable(i.take(1).subscribe(w,p,function(){m["delete"](c)&&0===m.size&&h&&f.onCompleted(),g.remove(e)})),void o.forEach(function(b){var c=B(d)(a,b);return c===A?f.onError(c.e):void f.onNext(c)}))},p,function(){h=!0,(i||0===m.size)&&f.onCompleted()})),g.add(a.subscribe(function(a){var b=l++,e=new n;o.set(b,a),g.add(e);var h=B(c)(a);return h===A?f.onError(h.e):(e.setDisposable(h.take(1).subscribe(w,p,function(){o["delete"](b)&&0===o.size&&i&&f.onCompleted(),g.remove(e)})),void m.forEach(function(b){var c=B(d)(b,a);return c===A?f.onError(c.e):void f.onNext(c)}))},p,function(){i=!0,(h||0===o.size)&&f.onCompleted()})),g},e)},q.groupJoin=function(a,b,c,d){var e=this;return new t(function(f){function g(a){}var h=new k,i=new m(h),j=new C,l=new C,o=0,q=0,g=function(a){return function(b){b.onError(a)}};return h.add(e.subscribe(function(a){var c=new p,e=o++;j.set(e,c);var k=B(d)(a,u(c,i));if(k===A)return j.forEach(g(k.e)),f.onError(k.e);f.onNext(k),l.forEach(function(a){c.onNext(a)});var m=new n;h.add(m);var q=B(b)(a);return q===A?(j.forEach(g(q.e)),f.onError(q.e)):void m.setDisposable(q.take(1).subscribe(w,function(a){j.forEach(g(a)),f.onError(a)},function(){j["delete"](e)&&c.onCompleted(),h.remove(m)}))},function(a){j.forEach(g(a)),f.onError(a)},function(){f.onCompleted()})),h.add(a.subscribe(function(a){var b=q++;l.set(b,a);var d=new n;h.add(d);var e=B(c)(a);return e===A?(j.forEach(g(e.e)),f.onError(e.e)):(d.setDisposable(e.take(1).subscribe(w,function(a){j.forEach(g(a)),f.onError(a)},function(){l["delete"](b),h.remove(d)})),void j.forEach(function(b){b.onNext(a)}))},function(a){j.forEach(g(a)),f.onError(a)})),i},e)},q.buffer=function(){return this.window.apply(this,arguments).flatMap(f)},q.window=function(a,b){return 1===arguments.length&&"function"!=typeof arguments[0]?h.call(this,a):"function"==typeof a?i.call(this,a):g.call(this,a,b)},q.pairwise=function(){var a=this;return new t(function(b){var c,d=!1;return a.subscribe(function(a){d?b.onNext([c,a]):d=!0,c=a},b.onError.bind(b),b.onCompleted.bind(b))},a)},q.partition=function(a,b){return[this.filter(a,b),this.filter(function(c,d,e){return!a.call(b,c,d,e)})]},q.groupBy=function(a,b){return this.groupByUntil(a,b,s)},q.groupByUntil=function(a,b,c){var e=this;return new t(function(f){var g=new C,h=new k,i=new m(h),j=function(a){return function(b){b.onError(a)}};return h.add(e.subscribe(function(e){var k=B(a)(e);if(k===A)return g.forEach(j(k.e)),f.onError(k.e);var l=!1,m=g.get(k);if(m===d&&(m=new p,g.set(k,m),l=!0),l){var o=new D(k,m,i),q=new D(k,m),r=B(c)(q);if(r===A)return g.forEach(j(r.e)),f.onError(r.e);f.onNext(o);var s=new n;h.add(s),s.setDisposable(r.take(1).subscribe(w,function(a){g.forEach(j(a)),f.onError(a)},function(){g["delete"](k)&&m.onCompleted(),h.remove(s)}))}var t=e;return y(b)&&(t=B(b)(e),t===A)?(g.forEach(j(t.e)),f.onError(t.e)):void m.onNext(t)},function(a){g.forEach(j(a)),f.onError(a)},function(){g.forEach(function(a){a.onCompleted()}),f.onCompleted()})),i},e)};var D=function(a){function b(a){return this.underlyingObservable.subscribe(a)}function c(c,d,e){a.call(this,b),this.key=c,this.underlyingObservable=e?new t(function(a){return new l(e.getDisposable(),d.subscribe(a))}):d}return v(c,a),c}(j);return c});
//# sourceMappingURL=rx.lite.coincidence.map